# Fact Pack: macOS CLI Tools
# ===========================
# DESIGN PRINCIPLE: Each CLI tool is an entity. Submodes (flag variants)
# are properties on the entity, keyed as 'submode_<name>'. The inference
# engine discovers submode ops from these properties (Phase 4).
#
# Output format classes (type_symmetry_class values):
#   shell_text_lines    — one item per line (ls, cat, head, tail)
#   shell_tabular       — columnar/structured text (ps, df)
#   shell_tree          — hierarchical paths (find)
#   shell_kv_pairs      — key: value pairs (du, wc, stat)
#   shell_single_value  — single scalar result (du -sh, wc -l)
#   shell_filtered_lines — pattern-matched lines (grep)
#   shell_byte_stream   — raw byte output (curl)
#
# Submode property format:
#   key:   submode_<name>     (e.g., submode_long, submode_by_time)
#   value: <flags>            (e.g., "-l", "-lt", "-aux")
#
# The inference engine reads these to generate variadic form ops:
#   shell_ls + submode_long → shell_ls_long with flags="-l"
#
# Each entity also carries:
#   op_name        — the base op name in the registry (e.g., "shell_ls")
#   racket_symbol  — the Racket function name (e.g., "shell-ls")
#   base_command   — the actual CLI command (e.g., "ls")
#   category_name  — always "shell"
#   type_symmetry_class — output format class (e.g., "shell_text_lines")

entities:
  # --- Text-lines tools (one item per line) ---
  - id: cli_ls
    name: "ls"
    description: "List directory contents — one entry per line"
  - id: cli_cat
    name: "cat"
    description: "Concatenate and print file contents"
  - id: cli_head
    name: "head"
    description: "Output the first part of files"
  - id: cli_tail
    name: "tail"
    description: "Output the last part of files"

  # --- Tabular tools (columnar structured output) ---
  - id: cli_ps
    name: "ps"
    description: "Report a snapshot of current processes"
  - id: cli_df
    name: "df"
    description: "Report filesystem disk space usage"

  # --- Tree tools (hierarchical path output) ---
  - id: cli_find
    name: "find"
    description: "Walk a file hierarchy, printing matching paths"

  # --- Filtered-lines tools (pattern-matched output) ---
  - id: cli_grep
    name: "grep"
    description: "Search file contents for lines matching a pattern"

  # --- Single-value tools (scalar result) ---
  - id: cli_du
    name: "du"
    description: "Estimate file space usage"
  - id: cli_wc
    name: "wc"
    description: "Word, line, character, and byte count"

  # --- Sort tool (transforms lines) ---
  - id: cli_sort
    name: "sort"
    description: "Sort lines of text"

  # --- Byte-stream tools (raw download) ---
  - id: cli_curl
    name: "curl"
    description: "Transfer data from or to a server"

  # --- File lifecycle tools (fire-and-forget, exit status) ---
  - id: cli_mv
    name: "mv"
    description: "Move or rename files and directories"
  - id: cli_cp
    name: "cp"
    description: "Copy files and directories"
  - id: cli_rm
    name: "rm"
    description: "Remove files or directories"
  - id: cli_mkdir
    name: "mkdir"
    description: "Create directories"
  - id: cli_ln
    name: "ln"
    description: "Create hard or symbolic links"
  - id: cli_chmod
    name: "chmod"
    description: "Change file mode bits (permissions)"
  - id: cli_chown
    name: "chown"
    description: "Change file owner and group"
  - id: cli_tar
    name: "tar"
    description: "Archive and extract files"
  - id: cli_unzip
    name: "unzip"
    description: "Extract files from ZIP archives"
  - id: cli_zip
    name: "zip"
    description: "Create and modify ZIP archives"
  - id: cli_unrar
    name: "unrar"
    description: "Extract files from RAR archives"
  - id: cli_7z
    name: "7z"
    description: "Archive and extract files (7-Zip, multi-format)"
  - id: cli_rsync
    name: "rsync"
    description: "Fast, versatile file copying/synchronization"
  - id: cli_open
    name: "open"
    description: "Open files and directories with default or specified application (macOS)"
  - id: cli_tee
    name: "tee"
    description: "Read stdin and write to stdout and files"

  # --- Single-value / metadata tools ---
  - id: cli_stat
    name: "stat"
    description: "Display file status and metadata"
  - id: cli_shasum
    name: "shasum"
    description: "Compute SHA message digests"
  - id: cli_file
    name: "file"
    description: "Determine file type via magic bytes"
  - id: cli_uname
    name: "uname"
    description: "Print system information"
  - id: cli_uptime
    name: "uptime"
    description: "Show system uptime and load averages"

  # --- Text-lines tools (additional) ---
  - id: cli_diff
    name: "diff"
    description: "Compare files line by line"
  - id: cli_sed
    name: "sed"
    description: "Stream editor for filtering and transforming text"
  - id: cli_awk
    name: "awk"
    description: "Pattern scanning and text processing language"
  - id: cli_cut
    name: "cut"
    description: "Remove sections from each line of files"
  - id: cli_tr
    name: "tr"
    description: "Translate or delete characters"
  - id: cli_paste
    name: "paste"
    description: "Merge lines of files side by side"
  - id: cli_column
    name: "column"
    description: "Format text into aligned columns"
  - id: cli_base64
    name: "base64"
    description: "Encode and decode base64"

  # --- Tree / search tools (additional) ---
  - id: cli_mdfind
    name: "mdfind"
    description: "Spotlight search from command line (macOS)"

  # --- macOS-specific tools ---
  - id: cli_xattr
    name: "xattr"
    description: "Display and manipulate extended attributes (macOS)"
  - id: cli_pbcopy
    name: "pbcopy"
    description: "Copy stdin to clipboard (macOS)"
  - id: cli_pbpaste
    name: "pbpaste"
    description: "Paste clipboard to stdout (macOS)"
  - id: cli_plutil
    name: "plutil"
    description: "Property list utility — read/write plist files (macOS)"

  # --- Tabular / process tools (additional) ---
  - id: cli_lsof
    name: "lsof"
    description: "List open files"
  - id: cli_kill
    name: "kill"
    description: "Send signals to processes"
  - id: cli_pkill
    name: "pkill"
    description: "Kill processes by name pattern"
  - id: cli_watch
    name: "watch"
    description: "Execute a program periodically, showing output"

  # --- Version control ---
  - id: cli_git
    name: "git"
    description: "Distributed version control system"

  # --- Structured data tools ---
  - id: cli_jq
    name: "jq"
    description: "Command-line JSON processor"
  - id: cli_yq
    name: "yq"
    description: "Command-line YAML/JSON/XML processor"

  # --- Session / multiplexer tools ---
  - id: cli_tmux
    name: "tmux"
    description: "Terminal multiplexer"
  - id: cli_screen
    name: "screen"
    description: "Terminal multiplexer (GNU Screen)"

  # --- Network tools ---
  - id: cli_ssh
    name: "ssh"
    description: "Secure shell remote login"
  - id: cli_scp
    name: "scp"
    description: "Secure copy over SSH"
  - id: cli_nc
    name: "nc"
    description: "Netcat — TCP/UDP connections and listeners"
  - id: cli_ping
    name: "ping"
    description: "Send ICMP echo requests to network hosts"
  - id: cli_dig
    name: "dig"
    description: "DNS lookup utility"

  # --- Compression / crypto tools ---
  - id: cli_gzip
    name: "gzip"
    description: "Compress or decompress files with gzip/gunzip"
  - id: cli_xz
    name: "xz"
    description: "Compress or decompress files with LZMA"
  - id: cli_openssl
    name: "openssl"
    description: "Cryptographic toolkit — hashing, encryption, certificates"

  # --- Desktop automation tools (Peekaboo) ---
  - id: cli_peekaboo_list
    name: "peekaboo list"
    description: "List running applications, windows, screens, or menu bar items"
  - id: cli_peekaboo_see
    name: "peekaboo see"
    description: "Capture and analyze UI elements for automation — returns element map with IDs"
  - id: cli_peekaboo_click
    name: "peekaboo click"
    description: "Click on UI elements by ID, query, or coordinates"
  - id: cli_peekaboo_type
    name: "peekaboo type"
    description: "Type text or send keyboard input to the focused element"
  - id: cli_peekaboo_hotkey
    name: "peekaboo hotkey"
    description: "Press keyboard shortcuts and key combinations"
  - id: cli_peekaboo_press
    name: "peekaboo press"
    description: "Press individual keys or key sequences"
  - id: cli_peekaboo_scroll
    name: "peekaboo scroll"
    description: "Scroll the mouse wheel in any direction"
  - id: cli_peekaboo_drag
    name: "peekaboo drag"
    description: "Perform drag and drop operations"
  - id: cli_peekaboo_app
    name: "peekaboo app"
    description: "Control applications — launch, quit, relaunch, hide, unhide, switch"
  - id: cli_peekaboo_window
    name: "peekaboo window"
    description: "Manipulate application windows — focus, close, minimize, maximize, move, resize"
  - id: cli_peekaboo_clipboard
    name: "peekaboo clipboard"
    description: "Read or write the macOS clipboard (text, images, files)"
  - id: cli_peekaboo_open
    name: "peekaboo open"
    description: "Open a URL or file with its default or specified application"

# ---------------------------------------------------------------------------
# Axes
# ---------------------------------------------------------------------------
axes:
  - id: shell_category
    name: "Shell Category"
    description: "All CLI tools share category=shell"
    polarity: capability
    sub_axes: []

  - id: shell_type_signature
    name: "Shell Type Signature"
    description: "Input/output types for the CLI tool's base form"
    polarity: capability
    sub_axes: []

  - id: shell_output_format
    name: "Shell Output Format"
    description: "The structural format of the tool's stdout"
    polarity: capability
    sub_axes: []

  - id: shell_submodes
    name: "Shell Submodes"
    description: "Flag variants that modify the tool's behavior"
    polarity: capability
    sub_axes: []

  - id: shell_type_symmetry
    name: "Shell Type Symmetry"
    description: "Groups tools by output format class for type-symmetric inference"
    polarity: capability
    sub_axes: []

# ---------------------------------------------------------------------------
# Claims — per-entity descriptions
# ---------------------------------------------------------------------------
claims:
  # --- ls ---
  - id: cli_ls_base
    entity: cli_ls
    axis: shell_output_format
    text: "ls outputs one filename per line (with -1 flag, or when piped). Default output is space-separated."

  - id: cli_ls_flags
    entity: cli_ls
    axis: shell_submodes
    text: "ls supports flags: -l (long format), -a (all including hidden), -R (recursive), -S (sort by size), -t (sort by time), -1 (one per line), -lt (long + time sort), -lS (long + size sort), -la (long + all)"

  # --- cat ---
  - id: cli_cat_base
    entity: cli_cat
    axis: shell_output_format
    text: "cat outputs file contents line by line to stdout. With -n flag, prepends line numbers."

  # --- head ---
  - id: cli_head_base
    entity: cli_head
    axis: shell_output_format
    text: "head outputs the first N lines of a file (default 10). Uses -n flag to specify count."

  # --- tail ---
  - id: cli_tail_base
    entity: cli_tail
    axis: shell_output_format
    text: "tail outputs the last N lines of a file (default 10). Uses -n flag for count, -f for follow."

  # --- ps ---
  - id: cli_ps_base
    entity: cli_ps
    axis: shell_output_format
    text: "ps outputs a table of running processes with columns: PID, TTY, TIME, CMD (default) or USER, PID, %CPU, %MEM, VSZ, RSS, TTY, STAT, START, TIME, COMMAND (with aux)."

  - id: cli_ps_flags
    entity: cli_ps
    axis: shell_submodes
    text: "ps supports flags: aux (all users, detailed), -e (every process), -f (full format), aux --sort=-%cpu (sort by CPU), aux --sort=-%mem (sort by memory)"

  # --- df ---
  - id: cli_df_base
    entity: cli_df
    axis: shell_output_format
    text: "df outputs a table of filesystem usage with columns: Filesystem, Size, Used, Avail, Use%, Mounted on."

  - id: cli_df_flags
    entity: cli_df
    axis: shell_submodes
    text: "df supports flags: -h (human-readable sizes), -i (inode info), -T (filesystem type)"

  # --- find ---
  - id: cli_find_base
    entity: cli_find
    axis: shell_output_format
    text: "find outputs one path per line, recursively walking a directory tree. Supports predicates for filtering."

  - id: cli_find_flags
    entity: cli_find
    axis: shell_submodes
    text: "find supports predicates: -name (glob match), -type f (files only), -type d (dirs only), -size +N (larger than), -mtime -N (modified within N days), -maxdepth N (limit depth)"

  # --- grep ---
  - id: cli_grep_base
    entity: cli_grep
    axis: shell_output_format
    text: "grep outputs lines matching a pattern. With -r, searches recursively. With -l, outputs only filenames."

  - id: cli_grep_flags
    entity: cli_grep
    axis: shell_submodes
    text: "grep supports flags: -r (recursive), -i (case insensitive), -n (line numbers), -l (filenames only), -c (count matches), -v (invert match), -E (extended regex)"

  # --- du ---
  - id: cli_du_base
    entity: cli_du
    axis: shell_output_format
    text: "du outputs disk usage per directory entry. With -s, summarizes to a single total. With -h, human-readable."

  - id: cli_du_flags
    entity: cli_du
    axis: shell_submodes
    text: "du supports flags: -sh (summary, human-readable), -d N (max depth), -a (all files not just dirs)"

  # --- wc ---
  - id: cli_wc_base
    entity: cli_wc
    axis: shell_output_format
    text: "wc outputs line count, word count, and byte count. Individual flags select which counts to show."

  - id: cli_wc_flags
    entity: cli_wc
    axis: shell_submodes
    text: "wc supports flags: -l (lines only), -w (words only), -c (bytes only), -m (characters only)"

  # --- sort ---
  - id: cli_sort_base
    entity: cli_sort
    axis: shell_output_format
    text: "sort outputs lines in sorted order. Default is lexicographic. Reads from stdin or file."

  - id: cli_sort_flags
    entity: cli_sort
    axis: shell_submodes
    text: "sort supports flags: -n (numeric), -r (reverse), -u (unique), -k N (sort by field N), -t C (field delimiter)"

  # --- curl ---
  - id: cli_curl_base
    entity: cli_curl
    axis: shell_output_format
    text: "curl transfers data from/to a URL. Default outputs response body to stdout."

  - id: cli_curl_flags
    entity: cli_curl
    axis: shell_submodes
    text: "curl supports flags: -s (silent), -L (follow redirects), -o FILE (output to file), -I (headers only), -X METHOD (HTTP method), -d DATA (POST data), -H HEADER (custom header)"

  # --- mv ---
  - id: cli_mv_base
    entity: cli_mv
    axis: shell_output_format
    text: "mv moves or renames files. Returns exit status 0 on success. No stdout output."
  - id: cli_mv_flags
    entity: cli_mv
    axis: shell_submodes
    text: "mv supports flags: -i (interactive, prompt before overwrite), -n (no clobber), -v (verbose)"

  # --- cp ---
  - id: cli_cp_base
    entity: cli_cp
    axis: shell_output_format
    text: "cp copies files and directories. Returns exit status 0 on success. No stdout output."
  - id: cli_cp_flags
    entity: cli_cp
    axis: shell_submodes
    text: "cp supports flags: -r (recursive), -a (archive, preserve attributes), -v (verbose), -n (no clobber)"

  # --- rm ---
  - id: cli_rm_base
    entity: cli_rm
    axis: shell_output_format
    text: "rm removes files and directories. Returns exit status 0 on success. No stdout output."
  - id: cli_rm_flags
    entity: cli_rm
    axis: shell_submodes
    text: "rm supports flags: -r (recursive), -f (force, no prompt), -i (interactive), -v (verbose)"

  # --- mkdir ---
  - id: cli_mkdir_base
    entity: cli_mkdir
    axis: shell_output_format
    text: "mkdir creates directories. Returns exit status 0 on success. No stdout output."
  - id: cli_mkdir_flags
    entity: cli_mkdir
    axis: shell_submodes
    text: "mkdir supports flags: -p (create parents), -v (verbose)"

  # --- ln ---
  - id: cli_ln_base
    entity: cli_ln
    axis: shell_output_format
    text: "ln creates links. Returns exit status 0 on success. No stdout output."
  - id: cli_ln_flags
    entity: cli_ln
    axis: shell_submodes
    text: "ln supports flags: -s (symbolic link), -f (force, remove existing)"

  # --- chmod ---
  - id: cli_chmod_base
    entity: cli_chmod
    axis: shell_output_format
    text: "chmod changes file permissions. Returns exit status 0 on success. No stdout output."
  - id: cli_chmod_flags
    entity: cli_chmod
    axis: shell_submodes
    text: "chmod supports flags: -R (recursive), -v (verbose)"

  # --- chown ---
  - id: cli_chown_base
    entity: cli_chown
    axis: shell_output_format
    text: "chown changes file owner/group. Returns exit status 0 on success. No stdout output."
  - id: cli_chown_flags
    entity: cli_chown
    axis: shell_submodes
    text: "chown supports flags: -R (recursive), -v (verbose)"

  # --- tar ---
  - id: cli_tar_base
    entity: cli_tar
    axis: shell_output_format
    text: "tar creates and extracts archives. With -t, lists contents (text lines). With -c/-x, returns exit status."
  - id: cli_tar_flags
    entity: cli_tar
    axis: shell_submodes
    text: "tar supports flags: -c (create), -x (extract), -t (list), -z (gzip), -j (bzip2), -J (xz), -f FILE (archive file), -v (verbose), -C DIR (change directory)"

  # --- rsync ---
  - id: cli_rsync_base
    entity: cli_rsync
    axis: shell_output_format
    text: "rsync synchronizes files between locations. Returns exit status 0 on success."
  - id: cli_rsync_flags
    entity: cli_rsync
    axis: shell_submodes
    text: "rsync supports flags: -a (archive), -v (verbose), -z (compress), --delete (remove extra files), -n (dry-run), --progress (show progress)"

  # --- open ---
  - id: cli_open_base
    entity: cli_open
    axis: shell_output_format
    text: "open opens files with default or specified application (macOS). Returns exit status."
  - id: cli_open_flags
    entity: cli_open
    axis: shell_submodes
    text: "open supports flags: -a APP (open with application), -R (reveal in Finder), -e (open in TextEdit), -t (open in default text editor)"

  # --- tee ---
  - id: cli_tee_base
    entity: cli_tee
    axis: shell_output_format
    text: "tee reads stdin and writes to stdout and files simultaneously. Output is text lines."
  - id: cli_tee_flags
    entity: cli_tee
    axis: shell_submodes
    text: "tee supports flags: -a (append to files instead of overwriting)"

  # --- stat ---
  - id: cli_stat_base
    entity: cli_stat
    axis: shell_output_format
    text: "stat displays file status: size, permissions, timestamps, inode. Output is key-value pairs."

  # --- shasum ---
  - id: cli_shasum_base
    entity: cli_shasum
    axis: shell_output_format
    text: "shasum computes SHA digests. Output is a single hash value followed by filename."
  - id: cli_shasum_flags
    entity: cli_shasum
    axis: shell_submodes
    text: "shasum supports flags: -a 256 (SHA-256), -a 512 (SHA-512), -a 1 (SHA-1)"

  # --- file ---
  - id: cli_file_base
    entity: cli_file
    axis: shell_output_format
    text: "file determines file type via magic bytes. Output is a single line: filename: type description."
  - id: cli_file_flags
    entity: cli_file
    axis: shell_submodes
    text: "file supports flags: --mime-type (output MIME type), -b (brief, no filename prefix)"

  # --- uname ---
  - id: cli_uname_base
    entity: cli_uname
    axis: shell_output_format
    text: "uname prints system information. Output is a single line of system details."

  # --- uptime ---
  - id: cli_uptime_base
    entity: cli_uptime
    axis: shell_output_format
    text: "uptime shows system uptime and load averages. Output is a single line."

  # --- diff ---
  - id: cli_diff_base
    entity: cli_diff
    axis: shell_output_format
    text: "diff compares files line by line. Output is text lines showing differences."
  - id: cli_diff_flags
    entity: cli_diff
    axis: shell_submodes
    text: "diff supports flags: -u (unified format), -r (recursive), -q (brief, report only whether files differ), --color (colorize output)"

  # --- sed ---
  - id: cli_sed_base
    entity: cli_sed
    axis: shell_output_format
    text: "sed is a stream editor. Output is transformed text lines."
  - id: cli_sed_flags
    entity: cli_sed
    axis: shell_submodes
    text: "sed supports flags: -i (in-place edit), -E (extended regex), -n (suppress default output), -e SCRIPT (add script)"

  # --- awk ---
  - id: cli_awk_base
    entity: cli_awk
    axis: shell_output_format
    text: "awk is a pattern scanning and text processing language. Output is text lines."

  # --- cut ---
  - id: cli_cut_base
    entity: cli_cut
    axis: shell_output_format
    text: "cut removes sections from each line. Output is text lines with selected fields."

  # --- tr ---
  - id: cli_tr_base
    entity: cli_tr
    axis: shell_output_format
    text: "tr translates or deletes characters. Output is transformed text."
  - id: cli_tr_flags
    entity: cli_tr
    axis: shell_submodes
    text: "tr supports flags: -d (delete characters), -s (squeeze repeats), -c (complement set)"

  # --- paste ---
  - id: cli_paste_base
    entity: cli_paste
    axis: shell_output_format
    text: "paste merges lines of files side by side. Output is text lines."

  # --- column ---
  - id: cli_column_base
    entity: cli_column
    axis: shell_output_format
    text: "column formats text into aligned columns. Output is text lines."

  # --- base64 ---
  - id: cli_base64_base
    entity: cli_base64
    axis: shell_output_format
    text: "base64 encodes or decodes base64. Output is encoded/decoded text."
  - id: cli_base64_flags
    entity: cli_base64
    axis: shell_submodes
    text: "base64 supports flags: -d (decode), -D (decode, macOS variant)"

  # --- mdfind ---
  - id: cli_mdfind_base
    entity: cli_mdfind
    axis: shell_output_format
    text: "mdfind searches Spotlight metadata. Output is one file path per line."
  - id: cli_mdfind_flags
    entity: cli_mdfind
    axis: shell_submodes
    text: "mdfind supports flags: -name (search by filename), -onlyin DIR (limit to directory)"

  # --- xattr ---
  - id: cli_xattr_base
    entity: cli_xattr
    axis: shell_output_format
    text: "xattr displays and manipulates extended attributes. Output varies by operation."
  - id: cli_xattr_flags
    entity: cli_xattr
    axis: shell_submodes
    text: "xattr supports flags: -l (list all), -p KEY (print value), -w KEY VALUE (write), -d KEY (delete), -c (clear all)"

  # --- pbcopy / pbpaste ---
  - id: cli_pbcopy_base
    entity: cli_pbcopy
    axis: shell_output_format
    text: "pbcopy copies stdin to the macOS clipboard. No stdout output."
  - id: cli_pbpaste_base
    entity: cli_pbpaste
    axis: shell_output_format
    text: "pbpaste outputs clipboard contents to stdout. Output is text."

  # --- plutil ---
  - id: cli_plutil_base
    entity: cli_plutil
    axis: shell_output_format
    text: "plutil reads and writes property list files. Output varies by operation."
  - id: cli_plutil_flags
    entity: cli_plutil
    axis: shell_submodes
    text: "plutil supports flags: -p (print human-readable), -convert FORMAT (xml1, binary1, json), -extract KEY TYPE (extract value)"

  # --- lsof ---
  - id: cli_lsof_base
    entity: cli_lsof
    axis: shell_output_format
    text: "lsof lists open files. Output is tabular: COMMAND, PID, USER, FD, TYPE, DEVICE, SIZE, NODE, NAME."

  # --- kill ---
  - id: cli_kill_base
    entity: cli_kill
    axis: shell_output_format
    text: "kill sends signals to processes. Returns exit status. No stdout output."

  # --- pkill ---
  - id: cli_pkill_base
    entity: cli_pkill
    axis: shell_output_format
    text: "pkill kills processes by name pattern. Returns exit status."

  # --- watch ---
  - id: cli_watch_base
    entity: cli_watch
    axis: shell_output_format
    text: "watch executes a command periodically and displays output. Output is text lines."

  # --- git ---
  - id: cli_git_base
    entity: cli_git
    axis: shell_output_format
    text: "git is a distributed VCS. Output varies by subcommand: text lines (log, status, diff, blame), exit status (add, commit, push, pull, checkout, merge, rebase, stash, tag, init, clone, branch)."
  - id: cli_git_flags
    entity: cli_git
    axis: shell_submodes
    text: "git subcommands: init, clone URL, add FILES, commit -m MSG, log, log A..B, diff, diff A B, branch NAME, checkout BRANCH, merge BRANCH, rebase BRANCH, stash, stash pop, push REMOTE BRANCH, pull REMOTE BRANCH, blame FILE, bisect start GOOD BAD, tag NAME COMMIT, status"

  # --- jq ---
  - id: cli_jq_base
    entity: cli_jq
    axis: shell_output_format
    text: "jq processes JSON. Output is JSON text (pretty-printed by default)."
  - id: cli_jq_flags
    entity: cli_jq
    axis: shell_submodes
    text: "jq supports flags: -r (raw output, no quotes), -c (compact output), -e (exit status reflects value), -s (slurp all inputs into array)"

  # --- yq ---
  - id: cli_yq_base
    entity: cli_yq
    axis: shell_output_format
    text: "yq processes YAML/JSON/XML. Output is YAML or JSON text."
  - id: cli_yq_flags
    entity: cli_yq
    axis: shell_submodes
    text: "yq supports flags: -o=json (output as JSON), -o=yaml (output as YAML), -r (raw output), -i (in-place edit)"

  # --- tmux ---
  - id: cli_tmux_base
    entity: cli_tmux
    axis: shell_output_format
    text: "tmux is a terminal multiplexer. Output varies by subcommand."
  - id: cli_tmux_flags
    entity: cli_tmux
    axis: shell_submodes
    text: "tmux subcommands: new-session -s NAME, attach -t NAME, split-window -h/-v, send-keys TEXT, list-sessions, kill-session -t NAME"

  # --- screen ---
  - id: cli_screen_base
    entity: cli_screen
    axis: shell_output_format
    text: "screen is a terminal multiplexer (GNU Screen). Output varies by subcommand."
  - id: cli_screen_flags
    entity: cli_screen
    axis: shell_submodes
    text: "screen subcommands: -S NAME (new session), -r NAME (reattach), -ls (list sessions)"

  # --- ssh ---
  - id: cli_ssh_base
    entity: cli_ssh
    axis: shell_output_format
    text: "ssh executes commands on remote hosts. Output is the remote command's stdout."

  # --- scp ---
  - id: cli_scp_base
    entity: cli_scp
    axis: shell_output_format
    text: "scp copies files over SSH. Returns exit status. Progress shown on stderr."
  - id: cli_scp_flags
    entity: cli_scp
    axis: shell_submodes
    text: "scp supports flags: -r (recursive), -P PORT (port), -q (quiet)"

  # --- nc ---
  - id: cli_nc_base
    entity: cli_nc
    axis: shell_output_format
    text: "nc (netcat) opens TCP/UDP connections. Output is received data."

  # --- ping ---
  - id: cli_ping_base
    entity: cli_ping
    axis: shell_output_format
    text: "ping sends ICMP echo requests. Output is text lines with round-trip times."

  # --- dig ---
  - id: cli_dig_base
    entity: cli_dig
    axis: shell_output_format
    text: "dig performs DNS lookups. Output is text lines with DNS records."

  # --- gzip ---
  - id: cli_gzip_base
    entity: cli_gzip
    axis: shell_output_format
    text: "gzip compresses or decompresses files. Returns exit status."
  - id: cli_gzip_flags
    entity: cli_gzip
    axis: shell_submodes
    text: "gzip supports flags: -d (decompress), -k (keep original), -v (verbose), -9 (best compression), -1 (fastest)"

  # --- xz ---
  - id: cli_xz_base
    entity: cli_xz
    axis: shell_output_format
    text: "xz compresses or decompresses files with LZMA. Returns exit status."
  - id: cli_xz_flags
    entity: cli_xz
    axis: shell_submodes
    text: "xz supports flags: -d (decompress), -k (keep original), -v (verbose), -9 (best compression)"

  # --- openssl ---
  - id: cli_openssl_base
    entity: cli_openssl
    axis: shell_output_format
    text: "openssl is a cryptographic toolkit. Output varies by subcommand (hash digests, certificates, etc.)."
  - id: cli_openssl_flags
    entity: cli_openssl
    axis: shell_submodes
    text: "openssl subcommands: dgst -sha256 (hash), dgst -md5 (MD5 hash), enc -aes-256-cbc (encrypt), x509 (certificate operations)"

  # --- peekaboo list ---
  - id: cli_peekaboo_list_base
    entity: cli_peekaboo_list
    axis: shell_output_format
    text: "peekaboo list outputs running applications, windows, screens, or menu bar items. With --json, outputs structured JSON."
  - id: cli_peekaboo_list_flags
    entity: cli_peekaboo_list
    axis: shell_submodes
    text: "peekaboo list supports subcommands: apps (list running apps), windows --app APP (list windows for app), screens (list displays), menubar (list menu bar items), permissions (check permissions). Supports --json flag."

  # --- peekaboo see ---
  - id: cli_peekaboo_see_base
    entity: cli_peekaboo_see
    axis: shell_output_format
    text: "peekaboo see captures a screenshot and analyzes UI elements. Returns element map with IDs (B1, T2, etc.) for use with click/type commands. With --json, outputs structured element data."
  - id: cli_peekaboo_see_flags
    entity: cli_peekaboo_see
    axis: shell_submodes
    text: "peekaboo see supports flags: --app APP (target application), --json (structured output), --annotate (annotated screenshot), --window-title TITLE (specific window), --mode MODE (screen, window, frontmost)"

  # --- peekaboo click ---
  - id: cli_peekaboo_click_base
    entity: cli_peekaboo_click
    axis: shell_output_format
    text: "peekaboo click clicks on UI elements by ID, text query, or coordinates. Returns exit status."
  - id: cli_peekaboo_click_flags
    entity: cli_peekaboo_click
    axis: shell_submodes
    text: "peekaboo click supports flags: --on ID (element ID from see), --coords X,Y (click at coordinates), --double (double-click), --right (right-click), --app APP (target app), --window-title TITLE"

  # --- peekaboo type ---
  - id: cli_peekaboo_type_base
    entity: cli_peekaboo_type
    axis: shell_output_format
    text: "peekaboo type sends keyboard input to the focused element. Returns exit status."
  - id: cli_peekaboo_type_flags
    entity: cli_peekaboo_type
    axis: shell_submodes
    text: "peekaboo type supports flags: --return (press return after typing), --clear (clear field first), --tab N (press tab N times), --delay MS (delay between keys), --app APP (target app)"

  # --- peekaboo hotkey ---
  - id: cli_peekaboo_hotkey_base
    entity: cli_peekaboo_hotkey
    axis: shell_output_format
    text: "peekaboo hotkey presses keyboard shortcuts. Returns exit status."

  # --- peekaboo press ---
  - id: cli_peekaboo_press_base
    entity: cli_peekaboo_press
    axis: shell_output_format
    text: "peekaboo press presses individual keys or key sequences. Returns exit status."

  # --- peekaboo scroll ---
  - id: cli_peekaboo_scroll_base
    entity: cli_peekaboo_scroll
    axis: shell_output_format
    text: "peekaboo scroll scrolls the mouse wheel in any direction. Returns exit status."

  # --- peekaboo drag ---
  - id: cli_peekaboo_drag_base
    entity: cli_peekaboo_drag
    axis: shell_output_format
    text: "peekaboo drag performs drag and drop operations. Returns exit status."

  # --- peekaboo app ---
  - id: cli_peekaboo_app_base
    entity: cli_peekaboo_app
    axis: shell_output_format
    text: "peekaboo app controls applications: launch, quit, relaunch, hide, unhide, switch. Returns exit status."
  - id: cli_peekaboo_app_flags
    entity: cli_peekaboo_app
    axis: shell_submodes
    text: "peekaboo app supports subcommands: launch APP (start app), quit --app APP (quit app), switch --to APP (switch to app), hide --app APP (hide app), unhide --app APP (show app), relaunch APP (restart app)"

  # --- peekaboo window ---
  - id: cli_peekaboo_window_base
    entity: cli_peekaboo_window
    axis: shell_output_format
    text: "peekaboo window manipulates windows: focus, close, minimize, maximize, move, resize. Returns exit status."
  - id: cli_peekaboo_window_flags
    entity: cli_peekaboo_window
    axis: shell_submodes
    text: "peekaboo window supports subcommands: focus --app APP (bring to front), close --app APP (close window), minimize --app APP (minimize), maximize --app APP (maximize), move --app APP --x N --y N (reposition), resize --app APP --width N --height N (resize)"

  # --- peekaboo clipboard ---
  - id: cli_peekaboo_clipboard_base
    entity: cli_peekaboo_clipboard
    axis: shell_output_format
    text: "peekaboo clipboard reads or writes the macOS clipboard. Read outputs clipboard text to stdout."
  - id: cli_peekaboo_clipboard_flags
    entity: cli_peekaboo_clipboard
    axis: shell_submodes
    text: "peekaboo clipboard supports subcommands: read (output clipboard contents), write TEXT (set clipboard contents)"

  # --- peekaboo open ---
  - id: cli_peekaboo_open_base
    entity: cli_peekaboo_open
    axis: shell_output_format
    text: "peekaboo open opens a URL or file with its default or specified application. Returns exit status."

# ---------------------------------------------------------------------------
# Evidence
# ---------------------------------------------------------------------------
evidence:
  - id: ev_ls_man
    supports: cli_ls_base
    text: "man ls — list directory contents"
    source: "POSIX / macOS man pages"

  - id: ev_ps_man
    supports: cli_ps_base
    text: "man ps — report a snapshot of the current processes"
    source: "POSIX / macOS man pages"

  - id: ev_find_man
    supports: cli_find_base
    text: "man find — walk a file hierarchy"
    source: "POSIX / macOS man pages"

  - id: ev_grep_man
    supports: cli_grep_base
    text: "man grep — file pattern searcher"
    source: "POSIX / macOS man pages"

  - id: ev_curl_man
    supports: cli_curl_base
    text: "man curl — transfer a URL"
    source: "curl.se documentation"

  - id: ev_peekaboo_list
    supports: cli_peekaboo_list_base
    text: "peekaboo list — list running applications, windows, screens, or menu bar items"
    source: "peekaboo --help"

  - id: ev_peekaboo_see
    supports: cli_peekaboo_see_base
    text: "peekaboo see — capture and analyze UI elements for automation"
    source: "peekaboo --help"

  - id: ev_peekaboo_click
    supports: cli_peekaboo_click_base
    text: "peekaboo click — click on UI elements or coordinates"
    source: "peekaboo --help"

  - id: ev_peekaboo_app
    supports: cli_peekaboo_app_base
    text: "peekaboo app — control applications: launch, quit, relaunch, hide, unhide, switch"
    source: "peekaboo --help"

  - id: ev_peekaboo_window
    supports: cli_peekaboo_window_base
    text: "peekaboo window — manipulate application windows"
    source: "peekaboo --help"

# ---------------------------------------------------------------------------
# Properties — structured data for the inference engine
# ---------------------------------------------------------------------------
compact_properties:
  cli_7z:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_add: a
      submode_extract: x
      submode_list: l
    shell_type_signature:
      base_command: 7z
      op_name: shell_7z
      racket_symbol: shell-7z
    shell_type_symmetry:
      type_symmetry_class: shell_text_lines
  cli_awk:
    shell_category:
      category_name: shell
    shell_type_signature:
      base_command: awk
      op_name: shell_awk
      racket_symbol: shell-awk
    shell_type_symmetry:
      type_symmetry_class: shell_text_lines
  cli_base64:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_decode: -D
    shell_type_signature:
      base_command: base64
      op_name: shell_base64
      racket_symbol: shell-base64
    shell_type_symmetry:
      type_symmetry_class: shell_text_lines
  cli_cat:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_number: -n
    shell_type_signature:
      base_command: cat
      op_name: shell_cat
      racket_symbol: shell-cat
    shell_type_symmetry:
      type_symmetry_class: shell_text_lines
  cli_chmod:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_recursive: -R
    shell_type_signature:
      base_command: chmod
      op_name: shell_chmod
      racket_symbol: shell-chmod
    shell_type_symmetry:
      type_symmetry_class: shell_exec
  cli_chown:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_recursive: -R
    shell_type_signature:
      base_command: chown
      op_name: shell_chown
      racket_symbol: shell-chown
    shell_type_symmetry:
      type_symmetry_class: shell_exec
  cli_column:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_table: -t
    shell_type_signature:
      base_command: column
      op_name: shell_column
      racket_symbol: shell-column
    shell_type_symmetry:
      type_symmetry_class: shell_text_lines
  cli_cp:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_archive: -a
      submode_no_clobber: -n
      submode_recursive: -r
      submode_verbose: -v
    shell_type_signature:
      base_command: cp
      op_name: shell_cp
      racket_symbol: shell-cp
    shell_type_symmetry:
      type_symmetry_class: shell_exec
  cli_curl:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_download: -sLO
      submode_follow_redirects: -sL
      submode_headers_only: -I
      submode_silent: -s
    shell_type_signature:
      base_command: curl
      op_name: shell_curl
      racket_symbol: shell-curl
    shell_type_symmetry:
      type_symmetry_class: shell_byte_stream
  cli_cut:
    shell_category:
      category_name: shell
    shell_type_signature:
      base_command: cut
      op_name: shell_cut
      racket_symbol: shell-cut
    shell_type_symmetry:
      type_symmetry_class: shell_text_lines
  cli_df:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_human: -h
      submode_inodes: -i
    shell_type_signature:
      base_command: df
      op_name: shell_df
      racket_symbol: shell-df
    shell_type_symmetry:
      type_symmetry_class: shell_tabular
  cli_diff:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_brief: -q
      submode_recursive: -r
      submode_unified: -u
    shell_type_signature:
      base_command: diff
      op_name: shell_diff
      racket_symbol: shell-diff
    shell_type_symmetry:
      type_symmetry_class: shell_text_lines
  cli_dig:
    shell_category:
      category_name: shell
    shell_type_signature:
      base_command: dig
      op_name: shell_dig
      racket_symbol: shell-dig
    shell_type_symmetry:
      type_symmetry_class: shell_text_lines
  cli_du:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_all_files: -a
      submode_depth: -d
      submode_summary: -sh
    shell_type_signature:
      base_command: du
      op_name: shell_du
      racket_symbol: shell-du
    shell_type_symmetry:
      type_symmetry_class: shell_single_value
  cli_file:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_brief: -b
      submode_mime: --mime-type
    shell_type_signature:
      base_command: file
      op_name: shell_file
      racket_symbol: shell-file
    shell_type_symmetry:
      type_symmetry_class: shell_single_value
  cli_find:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_by_mtime: -mtime
      submode_by_name: -name
      submode_by_size: -size
      submode_dirs_only: -type d
      submode_files_only: -type f
      submode_max_depth: -maxdepth
    shell_type_signature:
      base_command: find
      op_name: shell_find
      racket_symbol: shell-find
    shell_type_symmetry:
      type_symmetry_class: shell_tree
  cli_git:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_add: add
      submode_bisect: bisect
      submode_blame: blame
      submode_branch: branch
      submode_checkout: checkout
      submode_clone: clone
      submode_commit: commit
      submode_diff: diff
      submode_init: init
      submode_log: log
      submode_log_oneline: log --oneline
      submode_merge: merge
      submode_pull: pull
      submode_push: push
      submode_rebase: rebase
      submode_stash: stash
      submode_stash_pop: stash pop
      submode_status: status
      submode_tag: tag
    shell_type_signature:
      base_command: git
      op_name: shell_git
      racket_symbol: shell-git
    shell_type_symmetry:
      type_symmetry_class: shell_vcs
  cli_grep:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_case_insensitive: -i
      submode_count: -c
      submode_extended_regex: -E
      submode_filenames_only: -l
      submode_invert: -v
      submode_line_numbers: -n
      submode_recursive: -r
    shell_type_signature:
      base_command: grep
      op_name: shell_grep
      racket_symbol: shell-grep
    shell_type_symmetry:
      type_symmetry_class: shell_filtered_lines
  cli_gzip:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_best: "-9"
      submode_decompress: -d
      submode_keep: -k
    shell_type_signature:
      base_command: gzip
      op_name: shell_gzip
      racket_symbol: shell-gzip
    shell_type_symmetry:
      type_symmetry_class: shell_exec
  cli_head:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_lines: -n
    shell_type_signature:
      base_command: head
      op_name: shell_head
      racket_symbol: shell-head
    shell_type_symmetry:
      type_symmetry_class: shell_text_lines
  cli_jq:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_compact: -c
      submode_raw: -r
      submode_slurp: -s
    shell_type_signature:
      base_command: jq
      op_name: shell_jq
      racket_symbol: shell-jq
    shell_type_symmetry:
      type_symmetry_class: shell_structured
  cli_kill:
    shell_category:
      category_name: shell
    shell_type_signature:
      base_command: kill
      op_name: shell_kill
      racket_symbol: shell-kill
    shell_type_symmetry:
      type_symmetry_class: shell_exec
  cli_ln:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_force: -sf
      submode_symbolic: -s
    shell_type_signature:
      base_command: ln
      op_name: shell_ln
      racket_symbol: shell-ln
    shell_type_symmetry:
      type_symmetry_class: shell_exec
  cli_ls:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_all: -a
      submode_all_long: -la
      submode_by_size: -lS
      submode_by_time: -lt
      submode_long: -l
      submode_recursive: -R
    shell_type_signature:
      base_command: ls
      op_name: shell_ls
      racket_symbol: shell-ls
    shell_type_symmetry:
      type_symmetry_class: shell_text_lines
  cli_lsof:
    shell_category:
      category_name: shell
    shell_type_signature:
      base_command: lsof
      op_name: shell_lsof
      racket_symbol: shell-lsof
    shell_type_symmetry:
      type_symmetry_class: shell_tabular
  cli_mdfind:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_name: -name
      submode_onlyin: -onlyin
    shell_type_signature:
      base_command: mdfind
      op_name: shell_mdfind
      racket_symbol: shell-mdfind
    shell_type_symmetry:
      type_symmetry_class: shell_tree
  cli_mkdir:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_parents: -p
    shell_type_signature:
      base_command: mkdir
      op_name: shell_mkdir
      racket_symbol: shell-mkdir
    shell_type_symmetry:
      type_symmetry_class: shell_exec
  cli_mv:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_interactive: -i
      submode_no_clobber: -n
      submode_verbose: -v
    shell_type_signature:
      base_command: mv
      op_name: shell_mv
      racket_symbol: shell-mv
    shell_type_symmetry:
      type_symmetry_class: shell_exec
  cli_nc:
    shell_category:
      category_name: shell
    shell_type_signature:
      base_command: nc
      op_name: shell_nc
      racket_symbol: shell-nc
    shell_type_symmetry:
      type_symmetry_class: shell_network
  cli_open:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_reveal: -R
      submode_textedit: -e
      submode_with_app: -a
    shell_type_signature:
      base_command: open
      op_name: shell_open
      racket_symbol: shell-open
    shell_type_symmetry:
      type_symmetry_class: shell_exec
  cli_openssl:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_md5: dgst -md5
      submode_sha256: dgst -sha256
    shell_type_signature:
      base_command: openssl
      op_name: shell_openssl
      racket_symbol: shell-openssl
    shell_type_symmetry:
      type_symmetry_class: shell_text_lines
  cli_paste:
    shell_category:
      category_name: shell
    shell_type_signature:
      base_command: paste
      op_name: shell_paste
      racket_symbol: shell-paste
    shell_type_symmetry:
      type_symmetry_class: shell_text_lines
  cli_pbcopy:
    shell_category:
      category_name: shell
    shell_type_signature:
      base_command: pbcopy
      op_name: shell_pbcopy
      racket_symbol: shell-pbcopy
    shell_type_symmetry:
      type_symmetry_class: shell_exec
  cli_pbpaste:
    shell_category:
      category_name: shell
    shell_type_signature:
      base_command: pbpaste
      op_name: shell_pbpaste
      racket_symbol: shell-pbpaste
    shell_type_symmetry:
      type_symmetry_class: shell_text_lines
  cli_ping:
    shell_category:
      category_name: shell
    shell_type_signature:
      base_command: ping
      op_name: shell_ping
      racket_symbol: shell-ping
    shell_type_symmetry:
      type_symmetry_class: shell_text_lines
  cli_pkill:
    shell_category:
      category_name: shell
    shell_type_signature:
      base_command: pkill
      op_name: shell_pkill
      racket_symbol: shell-pkill
    shell_type_symmetry:
      type_symmetry_class: shell_exec
  cli_plutil:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_convert_json: -convert json
      submode_convert_xml: -convert xml1
      submode_print: -p
    shell_type_signature:
      base_command: plutil
      op_name: shell_plutil
      racket_symbol: shell-plutil
    shell_type_symmetry:
      type_symmetry_class: shell_text_lines
  cli_ps:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_aux: aux
      submode_by_cpu: aux --sort=-%cpu
      submode_by_mem: aux --sort=-%mem
      submode_every: -e
      submode_full: -ef
    shell_type_signature:
      base_command: ps
      op_name: shell_ps
      racket_symbol: shell-ps
    shell_type_symmetry:
      type_symmetry_class: shell_tabular
  cli_rm:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_force: -rf
      submode_interactive: -i
      submode_recursive: -r
    shell_type_signature:
      base_command: rm
      op_name: shell_rm
      racket_symbol: shell-rm
    shell_type_symmetry:
      type_symmetry_class: shell_exec
  cli_rsync:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_archive: -a
      submode_archive_verbose: -av
      submode_dry_run: -avn
    shell_type_signature:
      base_command: rsync
      op_name: shell_rsync
      racket_symbol: shell-rsync
    shell_type_symmetry:
      type_symmetry_class: shell_exec
  cli_scp:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_recursive: -r
    shell_type_signature:
      base_command: scp
      op_name: shell_scp
      racket_symbol: shell-scp
    shell_type_symmetry:
      type_symmetry_class: shell_network
  cli_screen:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_list: -ls
      submode_new_session: -S
      submode_reattach: -r
    shell_type_signature:
      base_command: screen
      op_name: shell_screen
      racket_symbol: shell-screen
    shell_type_symmetry:
      type_symmetry_class: shell_session
  cli_sed:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_extended: -E
      submode_in_place: -i ''
    shell_type_signature:
      base_command: sed
      op_name: shell_sed
      racket_symbol: shell-sed
    shell_type_symmetry:
      type_symmetry_class: shell_text_lines
  cli_shasum:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_sha256: -a 256
      submode_sha512: -a 512
    shell_type_signature:
      base_command: shasum
      op_name: shell_shasum
      racket_symbol: shell-shasum
    shell_type_symmetry:
      type_symmetry_class: shell_single_value
  cli_sort:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_numeric: -n
      submode_numeric_reverse: -nr
      submode_reverse: -r
      submode_unique: -u
    shell_type_signature:
      base_command: sort
      op_name: shell_sort
      racket_symbol: shell-sort
    shell_type_symmetry:
      type_symmetry_class: shell_text_lines
  cli_ssh:
    shell_category:
      category_name: shell
    shell_type_signature:
      base_command: ssh
      op_name: shell_ssh
      racket_symbol: shell-ssh
    shell_type_symmetry:
      type_symmetry_class: shell_network
  cli_stat:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_mtime: -f %m
      submode_permissions: -f %p
      submode_size: -f %z
      submode_type: -f %T
    shell_type_signature:
      base_command: stat
      op_name: shell_stat
      racket_symbol: shell-stat
    shell_type_symmetry:
      type_symmetry_class: shell_single_value
  cli_tail:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_follow: -f
      submode_lines: -n
    shell_type_signature:
      base_command: tail
      op_name: shell_tail
      racket_symbol: shell-tail
    shell_type_symmetry:
      type_symmetry_class: shell_text_lines
  cli_tar:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_create: -cf
      submode_create_gz: -czf
      submode_extract: -xf
      submode_extract_bz2: -xjf
      submode_extract_gz: -xzf
      submode_extract_xz: -xJf
      submode_list: -tf
    shell_type_signature:
      base_command: tar
      op_name: shell_tar
      racket_symbol: shell-tar
    shell_type_symmetry:
      type_symmetry_class: shell_exec
  cli_tee:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_append: -a
    shell_type_signature:
      base_command: tee
      op_name: shell_tee
      racket_symbol: shell-tee
    shell_type_symmetry:
      type_symmetry_class: shell_text_lines
  cli_tmux:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_attach: attach -t
      submode_list_sessions: list-sessions
      submode_new_session: new-session -s
      submode_send_keys: send-keys
      submode_split_h: split-window -h
      submode_split_v: split-window -v
    shell_type_signature:
      base_command: tmux
      op_name: shell_tmux
      racket_symbol: shell-tmux
    shell_type_symmetry:
      type_symmetry_class: shell_session
  cli_tr:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_delete: -d
      submode_squeeze: -s
    shell_type_signature:
      base_command: tr
      op_name: shell_tr
      racket_symbol: shell-tr
    shell_type_symmetry:
      type_symmetry_class: shell_text_lines
  cli_uname:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_all: -a
    shell_type_signature:
      base_command: uname
      op_name: shell_uname
      racket_symbol: shell-uname
    shell_type_symmetry:
      type_symmetry_class: shell_single_value
  cli_unrar:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_extract: x
    shell_type_signature:
      base_command: unrar
      op_name: shell_unrar
      racket_symbol: shell-unrar
    shell_type_symmetry:
      type_symmetry_class: shell_text_lines
  cli_unzip:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_extract: -o
      submode_list: -l
    shell_type_signature:
      base_command: unzip
      op_name: shell_unzip
      racket_symbol: shell-unzip
    shell_type_symmetry:
      type_symmetry_class: shell_text_lines
  cli_uptime:
    shell_category:
      category_name: shell
    shell_type_signature:
      base_command: uptime
      op_name: shell_uptime
      racket_symbol: shell-uptime
    shell_type_symmetry:
      type_symmetry_class: shell_single_value
  cli_watch:
    shell_category:
      category_name: shell
    shell_type_signature:
      base_command: watch
      op_name: shell_watch
      racket_symbol: shell-watch
    shell_type_symmetry:
      type_symmetry_class: shell_text_lines
  cli_wc:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_bytes: -c
      submode_chars: -m
      submode_lines: -l
      submode_words: -w
    shell_type_signature:
      base_command: wc
      op_name: shell_wc
      racket_symbol: shell-wc
    shell_type_symmetry:
      type_symmetry_class: shell_single_value
  cli_xattr:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_clear: -c
      submode_delete: -d
      submode_list: -l
      submode_print: -p
      submode_write: -w
    shell_type_signature:
      base_command: xattr
      op_name: shell_xattr
      racket_symbol: shell-xattr
    shell_type_symmetry:
      type_symmetry_class: shell_text_lines
  cli_xz:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_decompress: -d
      submode_keep: -k
    shell_type_signature:
      base_command: xz
      op_name: shell_xz
      racket_symbol: shell-xz
    shell_type_symmetry:
      type_symmetry_class: shell_exec
  cli_yq:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_json_out: -o=json
      submode_raw: -r
    shell_type_signature:
      base_command: yq
      op_name: shell_yq
      racket_symbol: shell-yq
    shell_type_symmetry:
      type_symmetry_class: shell_structured
  cli_zip:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_add: -g
      submode_create: -r
    shell_type_signature:
      base_command: zip
      op_name: shell_zip
      racket_symbol: shell-zip
    shell_type_symmetry:
      type_symmetry_class: shell_exec
  cli_peekaboo_list:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_apps: apps
      submode_windows: windows
      submode_screens: screens
      submode_menubar: menubar
      submode_json: --json
    shell_type_signature:
      base_command: "peekaboo list"
      op_name: shell_peekaboo_list
      racket_symbol: shell-peekaboo-list
    shell_type_symmetry:
      type_symmetry_class: shell_text_lines
  cli_peekaboo_see:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_json: --json
      submode_annotate: --annotate
    shell_type_signature:
      base_command: "peekaboo see"
      op_name: shell_peekaboo_see
      racket_symbol: shell-peekaboo-see
    shell_type_symmetry:
      type_symmetry_class: shell_text_lines
  cli_peekaboo_click:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_double: --double
      submode_right: --right
    shell_type_signature:
      base_command: "peekaboo click"
      op_name: shell_peekaboo_click
      racket_symbol: shell-peekaboo-click
    shell_type_symmetry:
      type_symmetry_class: shell_session
  cli_peekaboo_type:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_return: --return
      submode_clear: --clear
    shell_type_signature:
      base_command: "peekaboo type"
      op_name: shell_peekaboo_type
      racket_symbol: shell-peekaboo-type
    shell_type_symmetry:
      type_symmetry_class: shell_session
  cli_peekaboo_hotkey:
    shell_category:
      category_name: shell
    shell_type_signature:
      base_command: "peekaboo hotkey"
      op_name: shell_peekaboo_hotkey
      racket_symbol: shell-peekaboo-hotkey
    shell_type_symmetry:
      type_symmetry_class: shell_session
  cli_peekaboo_press:
    shell_category:
      category_name: shell
    shell_type_signature:
      base_command: "peekaboo press"
      op_name: shell_peekaboo_press
      racket_symbol: shell-peekaboo-press
    shell_type_symmetry:
      type_symmetry_class: shell_session
  cli_peekaboo_scroll:
    shell_category:
      category_name: shell
    shell_type_signature:
      base_command: "peekaboo scroll"
      op_name: shell_peekaboo_scroll
      racket_symbol: shell-peekaboo-scroll
    shell_type_symmetry:
      type_symmetry_class: shell_session
  cli_peekaboo_drag:
    shell_category:
      category_name: shell
    shell_type_signature:
      base_command: "peekaboo drag"
      op_name: shell_peekaboo_drag
      racket_symbol: shell-peekaboo-drag
    shell_type_symmetry:
      type_symmetry_class: shell_session
  cli_peekaboo_app:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_launch: launch
      submode_quit: quit
      submode_switch: switch
      submode_hide: hide
      submode_unhide: unhide
      submode_relaunch: relaunch
    shell_type_signature:
      base_command: "peekaboo app"
      op_name: shell_peekaboo_app
      racket_symbol: shell-peekaboo-app
    shell_type_symmetry:
      type_symmetry_class: shell_session
  cli_peekaboo_window:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_focus: focus
      submode_close: close
      submode_minimize: minimize
      submode_maximize: maximize
      submode_move: move
      submode_resize: resize
    shell_type_signature:
      base_command: "peekaboo window"
      op_name: shell_peekaboo_window
      racket_symbol: shell-peekaboo-window
    shell_type_symmetry:
      type_symmetry_class: shell_session
  cli_peekaboo_clipboard:
    shell_category:
      category_name: shell
    shell_submodes:
      submode_read: read
      submode_write: write
    shell_type_signature:
      base_command: "peekaboo clipboard"
      op_name: shell_peekaboo_clipboard
      racket_symbol: shell-peekaboo-clipboard
    shell_type_symmetry:
      type_symmetry_class: shell_text_lines
  cli_peekaboo_open:
    shell_category:
      category_name: shell
    shell_type_signature:
      base_command: "peekaboo open"
      op_name: shell_peekaboo_open
      racket_symbol: shell-peekaboo-open
    shell_type_symmetry:
      type_symmetry_class: shell_session
relations:
  - kind: ordinal
    id: rel_shell_category
    axis: shell_category
    property_key: category_name
    direction: higher_is_more
    note: "All CLI tools share category=shell"

# ---------------------------------------------------------------------------
# Uncertainties
# ---------------------------------------------------------------------------
uncertainties:
  - axis: shell_submodes
    text: "Submode inference transfers the base type signature but not behavioral semantics. E.g., ls -l changes output format from filenames to structured records, but the type system sees both as List(String)."
  - axis: shell_type_symmetry
    text: "Type-symmetric inference across output format classes assumes all tools in a class produce structurally similar output. This is approximate — ls and cat both produce text lines but with very different semantics."
  - axis: shell_submodes
    text: "Compound flags (ls -lt) are modeled as atomic submodes. The inference engine does not compose individual flags — each combination must be explicitly declared."
