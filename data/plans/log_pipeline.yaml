# Plan: Log Pipeline
# ======================
# Read a log file, extract fields with awk, transform with sed,
# then take the first 100 lines.
# 4-step File(Text) chain.

log_pipeline:
  inputs:
    - logfile: File(Text)
  steps:
    - awk_extract:
        program: {print $1, $4, $5}
    - sed_script:
        script: s/ERROR/[ERR]/g; s/WARN/[WRN]/g
    - head:
        count: 100
    - tail:
        count: 50
