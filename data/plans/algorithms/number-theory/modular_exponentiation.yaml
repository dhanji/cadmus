# Modular exponentiation: (base^exp) mod m using fast exponentiation
# Example: (2^10) mod 1000 = 24
# expected: 24

modular_exponentiation:
  inputs:
    - base: "Number"
    - exp: "Number"
    - m: "Number"
  bindings:
    base: "2"
    exp: "10"
    m: "1000"
  steps:
    - iterate:
        name: "loop"
        bindings: "b=base e=exp result=1"
        body: "(if (= e 0) result (let ([result (if (odd? e) (modulo (* result b) m) result)]) (loop (modulo (* b b) m) (quotient e 2) result)))"
