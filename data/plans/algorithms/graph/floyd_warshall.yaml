# Floyd-Warshall: all-pairs shortest paths
# 4 nodes, edges: 0→1(3) 0→2(6) 1→2(2) 2→3(1) 3→0(7)
# Example: dist matrix row 0 = (0 3 5 6)
# expected: (0 3 5 6)

floyd_warshall:
  inputs:
    - n: "Number"
  bindings:
    n: "4"
  steps:
    - let_bind:
        bindings: "[d (vector (vector 0 3 6 +inf.0) (vector +inf.0 0 2 +inf.0) (vector +inf.0 +inf.0 0 1) (vector 7 +inf.0 +inf.0 0))]"
        body: "(begin (for* ([k (in-range n)] [i (in-range n)] [j (in-range n)]) (let ([via (+ (vector-ref (vector-ref d i) k) (vector-ref (vector-ref d k) j))]) (when (< via (vector-ref (vector-ref d i) j)) (vector-set! (vector-ref d i) j via)))) (vector->list (vector-ref d 0)))"
