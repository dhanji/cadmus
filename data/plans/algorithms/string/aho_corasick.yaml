# Aho-Corasick: multi-pattern search (simplified â€” count total matches)
# Example: count "he","she","his","hers" in "ahishers" = 5
# expected: 4

aho_corasick:
  inputs:
    - text: "String"
  bindings:
    text: "\"ahishers\""
  steps:
    - let_bind:
        bindings: "[patterns (list \"he\" \"she\" \"his\" \"hers\")]"
        body: "(for/sum ([pat (in-list patterns)]) (let ([plen (string-length pat)] [tlen (string-length text)]) (for/sum ([i (in-range (+ (- tlen plen) 1))]) (if (string=? (substring text i (+ i plen)) pat) 1 0))))"
