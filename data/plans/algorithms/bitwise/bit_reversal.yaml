# Bit reversal: reverse bits of 8-bit number
# Example: reverse_bits(0b10110010) = 0b01001101 = 77
# expected: 77

bit_reversal:
  inputs:
    - n: "Number"
  bindings:
    n: "178"
  steps:
    - range:
        start: "0"
        end: "8"
    - fold:
        acc: "result"
        init: "0"
        var: "i"
        over: "$step-1"
        body:
          - arithmetic_shift:
              x: "$n"
              y:
                subtract:
                  x: "0"
                  y: "$i"
          - bitwise_and:
              x: "$body-1"
              y: "1"
          - arithmetic_shift:
              x: "$result"
              y: "1"
          - bitwise_or:
              x: "$body-3"
              y: "$body-2"
