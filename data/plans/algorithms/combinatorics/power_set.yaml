# Power set: all subsets of a set
# Example: power_set((1 2 3)) = (() (1) (2) (1 2) (3) (1 3) (2 3) (1 2 3))
# expected: (() (1) (2) (1 2) (3) (1 3) (2 3) (1 2 3))

power_set:
  inputs:
    - lst: "List(Number)"
  bindings:
    lst: "(list 1 2 3)"
  steps:
    - let_bind:
        bindings: "[n (length lst)]"
        body: "(for/list ([mask (in-range (expt 2 n))]) (for/list ([i (in-range n)] #:when (> (bitwise-and mask (arithmetic-shift 1 i)) 0)) (list-ref lst i)))"
