# Integer partition count: number of ways to write n as sum of positive integers
# Example: p(10) = 42
# expected: 42

integer_partition_count:
  inputs:
    - n: "Number"
  bindings:
    n: "10"
  steps:
    - add:
        x: "$n"
        y: "1"
    - make_vector:
        size: "$step-1"
        init: "0"
    - vector_set:
        v: "$step-2"
        i: "0"
        val: "1"
    - range:
        start: "1"
        end:
          add:
            x: "$n"
            y: "1"
    - for_each:
        var: "i"
        over: "$step-4"
        body:
          - for_range:
              var: "j"
              start: "$i"
              end:
                add:
                  x: "$n"
                  y: "1"
              body:
                - vector_ref:
                    v: "$step-2"
                    i: "$j"
                - subtract:
                    x: "$j"
                    y: "$i"
                - vector_ref:
                    v: "$step-2"
                    i: "$body-2"
                - add:
                    x: "$body-1"
                    y: "$body-3"
                - vector_set:
                    v: "$step-2"
                    i: "$j"
                    val: "$body-4"
    - vector_ref:
        v: "$step-2"
        i: "$n"
