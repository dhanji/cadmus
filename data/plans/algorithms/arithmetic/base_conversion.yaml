# Base conversion: convert decimal to given base
# Example: 255 in base 16 = "FF"
# expected: FF

base_conversion:
  inputs:
    - n: "Number"
    - base: "Number"
  bindings:
    n: "255"
    base: "16"
  steps:
    - iterate:
        name: "loop"
        bindings: "x=n acc=(list)"
        body: "(if (= x 0) (if (null? acc) \"0\" (apply string-append (map (lambda (d) (string (integer->char (if (< d 10) (+ d 48) (+ d 55))))) acc))) (loop (quotient x base) (cons (remainder x base) acc)))"
