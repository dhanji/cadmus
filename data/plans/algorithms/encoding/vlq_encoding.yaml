# Variable-length quantity encoding
# Example: vlq(300) = (2 44) — 300 = 0x12C → groups of 7 bits
# expected: (172 2)

vlq_encoding:
  inputs:
    - n: "Number"
  bindings:
    n: "300"
  steps:
    - iterate:
        name: "loop"
        bindings: "x=n acc=(list)"
        body: "(let ([byte (bitwise-and x 127)] [rest (arithmetic-shift x -7)]) (if (= rest 0) (reverse (cons byte acc)) (loop rest (cons (bitwise-ior byte 128) acc))))"
