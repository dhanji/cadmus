# Monte Carlo Pi estimation using fixed seed
# Use deterministic sequence instead of random for reproducibility
# expected: 3.17

monte_carlo_pi:
  inputs:
    - n: "Number"
  bindings:
    n: "10000"
  steps:
    - let_bind:
        bindings: "[samples 10000]"
        body: "(let* ([gen (make-pseudo-random-generator)] [_ (parameterize ([current-pseudo-random-generator gen]) (random-seed 42))] [inside (parameterize ([current-pseudo-random-generator gen]) (for/sum ([_ (in-range samples)]) (let ([x (random)] [y (random)]) (if (<= (+ (* x x) (* y y)) 1.0) 1 0))))]) (/ (round (* (/ (* 4.0 inside) samples) 100)) 100))"
