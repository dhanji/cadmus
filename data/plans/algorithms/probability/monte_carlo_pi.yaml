# Monte Carlo Pi estimation using fixed seed
# Use deterministic sequence instead of random for reproducibility
# expected: 3.17

monte_carlo_pi:
  inputs:
    - n: "Number"
  bindings:
    n: "10000"
  steps:
    - random_seed: "42"
    - range:
        start: "0"
        end: "$n"
    - for_sum:
        var: "_"
        over: "$step-2"
        body:
          - random: ""
          - random: ""
          - multiply:
              x: "$body-1"
              y: "$body-1"
          - multiply:
              x: "$body-2"
              y: "$body-2"
          - add:
              x: "$body-3"
              y: "$body-4"
          - cond:
              clauses:
                - test:
                    less_than_or_equal:
                      x: "$body-5"
                      y: "1.0"
                  then: "1"
                - else: "0"
    - multiply:
        x: "4.0"
        y: "$step-3"
    - divide:
        x: "$step-4"
        y: "$n"
    - multiply:
        x: "$step-5"
        y: "100"
    - round: "$step-6"
    - divide:
        x: "$step-7"
        y: "100"
