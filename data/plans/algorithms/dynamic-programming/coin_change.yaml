# Coin change: minimum coins to make amount
# Example: coins (1 5 10 25), amount 36 = 3 (25+10+1)
# expected: 3

coin_change:
  inputs:
    - amount: "Number"
  bindings:
    amount: "36"
  steps:
    - add:
        x: "$amount"
        y: "1"
    - make_vector:
        size: "$step-1"
        init:
          add:
            x: "$amount"
            y: "1"
    - vector_set:
        v: "$step-2"
        i: "0"
        val: "0"
    - list_new: "1 5 10 25"
    - for_each:
        var: "c"
        over: "$step-4"
        body:
          - for_range:
              var: "a"
              start: "$c"
              end:
                add:
                  x: "$amount"
                  y: "1"
              body:
                - vector_ref:
                    v: "$step-2"
                    i: "$a"
                - subtract:
                    x: "$a"
                    y: "$c"
                - vector_ref:
                    v: "$step-2"
                    i: "$body-2"
                - add:
                    x: "$body-3"
                    y: "1"
                - min:
                    x: "$body-1"
                    y: "$body-4"
                - vector_set:
                    v: "$step-2"
                    i: "$a"
                    val: "$body-5"
    - vector_ref:
        v: "$step-2"
        i: "$amount"
